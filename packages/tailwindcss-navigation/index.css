/* Import tokens first */
@import "./tokens.css";

/* @casoon/tailwindcss-navigation */
/* Navigation components and utilities for Tailwind CSS v4 */

@layer components {

    /* ===== Core ===== */
    .nav { @apply flex items-center; gap: var(--nav-gap); }
    .nav-item { @apply relative; }
  
    .nav-link {
      @apply inline-flex items-center gap-2 font-medium no-underline transition-all duration-200 outline-none
             rounded-md focus-visible:ring-2 focus-visible:ring-offset-2;
      padding: var(--nav-link-py) var(--nav-link-px);
      color: var(--nav-fg);
      background: var(--nav-link-bg, transparent);
      border-radius: var(--nav-link-radius);
    }
    .nav-link:hover {
      background: var(--nav-bg-hover);
      color: var(--nav-fg-hover);
      transform: translateY(-1px);
    }
    .nav-link[aria-current="page"],
    .nav-link[data-active="true"] { @apply font-semibold; }
  
    /* Density */
    .nav--compact .nav-link { padding: var(--nav-link-compact-py) var(--nav-link-compact-px); }
    .nav--roomy   .nav-link { padding: var(--nav-link-roomy-py)   var(--nav-link-roomy-px); }
  
    /* Surface Container (optional) */
    .nav-surface {
      @apply px-4 py-2 border;
      background: var(--nav-bg);
      color: var(--nav-fg);
      border-color: var(--nav-border);
      border-radius: var(--nav-radius);
      backdrop-filter: blur(var(--nav-blur));
      box-shadow: var(--nav-shadow);
    }
  
    /* Orientation */
    .nav--horizontal { @apply flex-row; }
    .nav--vertical   { @apply flex-col; }
    .nav--justify    { @apply justify-between; }
  
    /* ===== Variants ===== */
  
    /* Underline */
    .nav--underline .nav-link { @apply rounded-none; background: transparent; }
    .nav--underline .nav-link::after {
      content: ""; @apply absolute left-2 right-2 bottom-0 h-0.5 rounded-full;
      background: linear-gradient(90deg, var(--nav-accent-from), var(--nav-accent-to));
      transform: scaleX(0); transform-origin: left; transition: transform .25s ease;
    }
    .nav--underline .nav-link:hover::after,
    .nav--underline .nav-link[aria-current="page"]::after,
    .nav--underline .nav-link[data-active="true"]::after { transform: scaleX(1); }
  
    /* Tabs */
    .nav--tabs { @apply gap-1; }
    .nav--tabs .nav-link { @apply rounded-lg; color: var(--nav-tab-fg); background: transparent; }
    .nav--tabs .nav-link[aria-current="page"],
    .nav--tabs .nav-link[data-active="true"] {
      background: var(--nav-tab-active-bg);
      box-shadow: inset 0 0 0 1px var(--nav-tab-active-ring);
    }
  
    /* Pills */
    .nav--pills .nav-link { @apply rounded-full; background: transparent; }
    .nav--pills .nav-link:hover { background: var(--nav-bg-hover); }
    .nav--pills .nav-link[aria-current="page"],
    .nav--pills .nav-link[data-active="true"] {
      background: linear-gradient(135deg,
        color-mix(in oklab, var(--nav-accent-from) 35%, transparent),
        color-mix(in oklab, var(--nav-accent-to) 35%, transparent));
      color: var(--nav-pill-active-fg);
    }
  
    /* Ghost */
    .nav--ghost .nav-link { background: transparent; }
    .nav--ghost .nav-link:hover { background: var(--nav-bg-hover); }
  
    /* CTA */
    .nav-link--primary {
      @apply font-semibold relative overflow-hidden rounded-lg;
      padding: calc(var(--nav-link-py) + .25rem) calc(var(--nav-link-px) + .25rem);
      background: linear-gradient(135deg, var(--nav-accent-from), var(--nav-accent-to));
      background-clip: text; -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      transition: all .3s ease;
    }
    .nav-link--primary::before {
      content: ""; @apply absolute inset-0 rounded-lg transition-opacity duration-300;
      background: linear-gradient(135deg,
        color-mix(in oklab, var(--nav-accent-from) 15%, transparent),
        color-mix(in oklab, var(--nav-accent-to) 15%, transparent));
      opacity: 0; z-index: -1;
    }
    .nav-link--primary:hover {
      transform: translateY(-2px); filter: brightness(1.12);
      box-shadow: var(--nav-cta-shadow);
    }
    .nav-link--primary:hover::before { opacity: 1; }
  
    /* ===== Subnav / Flyout ===== */
    .subnav { @apply relative; }
    .subnav-toggle { @apply nav-link; }
    .subnav-panel {
      @apply absolute left-0 mt-2 w-56 overflow-hidden rounded-xl p-2 border shadow-lg;
      background: var(--nav-subnav-bg);
      color: var(--nav-subnav-fg);
      border-color: var(--nav-subnav-border);
      backdrop-filter: blur(var(--nav-subnav-blur));
      transform-origin: top left; transform: scale(.98);
      opacity: 0; pointer-events: none;
      transition: opacity .18s ease, transform .18s ease; z-index: 50;
    }
    /* Ã–ffnen via :hover / :focus-within / data-open / aria-expanded */
    .subnav:hover > .subnav-panel,
    .subnav:focus-within > .subnav-panel,
    .subnav[data-open="true"] > .subnav-panel,
    .subnav-toggle[aria-expanded="true"] + .subnav-panel {
      transform: scale(1); opacity: 1; pointer-events: auto;
    }
    .subnav-link { @apply nav-link w-full rounded-lg; color: var(--nav-subnav-fg); background: transparent; }
    .subnav-link:hover { background: var(--nav-subnav-hover); }
  
    /* ===== Utilities ===== */
    .nav-wrap     { @apply flex flex-wrap; gap: var(--nav-gap); }
    .nav-scroll-x { @apply overflow-x-auto whitespace-nowrap scrollbar-none; }
    .nav-scroll-y { @apply overflow-y-auto; max-height: 70vh; }
    .nav--switch-md { @apply flex-col md:flex-row; }
  
    /* Dividers & Badges */
    .nav-divider-horizontal { @apply h-px w-full; background: color-mix(in oklab, currentColor 12%, transparent); }
    .nav-divider-vertical   { @apply w-px h-6;   background: color-mix(in oklab, currentColor 12%, transparent); }
    .nav-badge {
      @apply inline-flex items-center justify-center text-xs font-semibold rounded-full px-2 py-0.5;
      background: color-mix(in oklab, var(--nav-accent-to) 20%, transparent);
      color: #fff;
    }
  
    /* Hover Slide effect container */
    .nav-hover-slide .nav-link { position: relative; overflow: hidden; }
    .nav-hover-slide .nav-link::after {
      content: ""; position: absolute; inset: 0; background: var(--nav-bg-hover);
      transform: translateX(-100%); transition: transform .25s ease; z-index: -1;
    }
    .nav-hover-slide .nav-link:hover::after { transform: translateX(0); }

    /* Hover fade */
    .nav-hover-fade .nav-link { transition: background .2s ease, color .2s ease, transform .2s ease; }
    .nav-hover-fade .nav-link:hover { background: var(--nav-bg-hover); color: var(--nav-fg-hover); }

    /* Hover scale */
    .nav-hover-scale .nav-link { transition: transform .15s ease; }
    .nav-hover-scale .nav-link:hover { transform: scale(1.04); }

    /* Active states */
    .nav-active-glow .nav-link[aria-current="page"],
    .nav-active-glow .nav-link[data-active="true"] {
      box-shadow: 0 0 0 2px color-mix(in oklab, var(--nav-accent-from) 60%, transparent);
    }
    .nav-active-pulse .nav-link[aria-current="page"],
    .nav-active-pulse .nav-link[data-active="true"] { animation: navPulse .9s ease-in-out; }
    .nav-active-bounce .nav-link[aria-current="page"],
    .nav-active-bounce .nav-link[data-active="true"] { animation: navBounce .6s ease; }
    @keyframes navPulse { 0%{ transform: scale(1) } 50%{ transform: scale(1.04) } 100%{ transform: scale(1) } }
    @keyframes navBounce { 0%{ transform: translateY(0) } 50%{ transform: translateY(-2px) } 100%{ transform: translateY(0) } }

    /* Focus enhancers */
    .nav-focus-ring .nav-link:focus-visible { outline: none; box-shadow: 0 0 0 2px var(--nav-focus-ring, color-mix(in oklab, var(--nav-accent-to) 55%, transparent)); }
    .nav-focus-glow .nav-link:focus-visible { outline: none; box-shadow: 0 0 0 4px color-mix(in oklab, var(--nav-accent-to) 35%, transparent); }
    .nav-focus-scale .nav-link:focus-visible { transform: scale(1.04); }

    /* Menu transitions (utility containers) */
    .menu-slide-down { transform-origin: top; transform: scaleY(.98); opacity: 0; transition: transform .18s ease, opacity .18s ease; }
    .menu-slide-down[data-open="true"], .menu-slide-down[aria-expanded="true"] { transform: scaleY(1); opacity: 1; }
    .menu-slide-up { transform-origin: bottom; transform: scaleY(1.02); opacity: 0; transition: transform .18s ease, opacity .18s ease; }
    .menu-slide-up[data-open="true"], .menu-slide-up[aria-expanded="true"] { transform: scaleY(1); opacity: 1; }
    .menu-fade-in { opacity: 0; transition: opacity .18s ease; }
    .menu-fade-in[data-open="true"], .menu-fade-in[aria-expanded="true"] { opacity: 1; }
  
    /* ===== Optional: Preset-Helper (nutzt deine vordefinierten Light/Dark Tokens) ===== */
    .nav-theme-light {
      --nav-bg: var(--nav-light-bg);
      --nav-fg: var(--nav-light-fg);
      --nav-bg-hover: var(--nav-light-hover);
      --nav-border: var(--nav-light-border);
    }
    .nav-theme-dark {
      --nav-bg: var(--nav-dark-bg);
      --nav-fg: var(--nav-dark-fg);
      --nav-bg-hover: var(--nav-dark-hover);
      --nav-border: var(--nav-dark-border);
    }
  }
  
