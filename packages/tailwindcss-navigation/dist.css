/*!
 * Casoon Navigation CSS (dist.css)
 * Version: 1.0.2 • Build: 2025-09-08
 *
 * Change log (selector-shortening fix):
 * - Removed long descendant chains flagged by linter.
 * - Introduced variant classes on links: `.cs-nav-link--pill` and `.cs-nav-link--tab`.
 * - Split focus-visible group into separate short rules.
 * - Kept behavior identical; no :is()/:where() used.
 *
 * Usage change (important):
 * - Pills:  <a class="cs-nav-link cs-nav-link--pill cs-active" ...>
 * - Tabs:   <a class="cs-nav-link cs-nav-link--tab cs-active" ...>
 * - You can still use [aria-current="page|true"] instead of `.cs-active`.
 */

/* ----------------------------------------------
   TOKENS
---------------------------------------------- */

:root {
  /* Palette */
  --cs-color-primary: #007bff;
  --cs-color-white: #ffffff;
  --cs-color-text: #0f172a;       /* slate-900-ish */
  --cs-color-text-muted: #495057;
  --cs-color-border: #dee2e6;
  --cs-color-bg: #ffffff;
  --cs-color-bg-subtle: #f8f9fa;

  /* Elevation / Shadows */
  --cs-shadow-0: none;
  --cs-shadow-1: 0 1px 2px rgba(0,0,0,.06);
  --cs-shadow-2: 0 2px 8px rgba(0,0,0,.12);

  /* Radii */
  --cs-radius-sm: 0.25rem;
  --cs-radius-md: 0.375rem;
  --cs-radius-lg: 0.5rem;

  /* Spacing & Density */
  --cs-density: 1; /* 1 = default, <1 compact, >1 comfy */
  --cs-space-1: calc(0.25rem * var(--cs-density));
  --cs-space-2: calc(0.5rem * var(--cs-density));
  --cs-space-3: calc(0.75rem * var(--cs-density));
  --cs-space-4: calc(1rem * var(--cs-density));
  --cs-space-6: calc(1.5rem * var(--cs-density));

  /* Typography */
  --cs-font-sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  --cs-font-size-sm: 0.875rem;
  --cs-font-size-base: 1rem;
  --cs-font-weight-reg: 400;
  --cs-font-weight-med: 500;
  --cs-font-weight-bold: 600;
  --cs-line: 1.5;

  /* Transitions & Easing */
  --cs-ease: cubic-bezier(.2,.8,.2,1);
  --cs-transition: 160ms var(--cs-ease);
  --cs-transition-fast: 120ms var(--cs-ease);
  --cs-transition-slow: 220ms var(--cs-ease);

  /* Z-index scale for nav-related overlays */
  --cs-z-nav: 10;
  --cs-z-dropdown: 1000;
  --cs-z-sticky: 1020;

  /* Backdrop (for optional acrylic) */
  --cs-acrylic-bg: rgba(255,255,255,.7);
  --cs-acrylic-border: rgba(0,0,0,.06);
}

/* Compatibility aliases (kept) */
:root {
  --cs-nav-primary: var(--cs-color-primary);
  --cs-nav-white: var(--cs-color-white);
  --cs-nav-text-muted: var(--cs-color-text-muted);
  --cs-nav-border: var(--cs-color-border);
}

/* ----------------------------------------------
   BASE / RESETS
---------------------------------------------- */

.cs-nav,
.cs-navbar,
.cs-navbar-nav {
  font-family: var(--cs-font-sans);
  font-size: var(--cs-font-size-base);
  line-height: var(--cs-line);
  color: var(--cs-color-text);
}

/* ----------------------------------------------
   NAVIGATION PRIMITIVES
---------------------------------------------- */

.cs-nav {
  display: flex;
  flex-wrap: wrap;
  gap: var(--cs-space-1);
  padding-left: 0;
  margin: 0 0 var(--cs-space-2) 0;
  list-style: none;
}

.cs-nav-item { display: block; position: relative; }

.cs-nav-link {
  display: block;
  padding: calc(0.5rem * var(--cs-density)) calc(1rem * var(--cs-density));
  color: inherit;
  text-decoration: none;
  border-radius: var(--cs-radius-sm);
  transition: color var(--cs-transition), background-color var(--cs-transition), border-color var(--cs-transition);
  outline: none;
}

.cs-nav-link:hover {
  text-decoration: none;
  background-color: var(--cs-color-bg-subtle);
}

.cs-nav-link.cs-active,
.cs-nav-link[aria-current="page"],
.cs-nav-link[aria-current="true"] {
  font-weight: var(--cs-font-weight-bold);
}

/* ----------------------------------------------
   VARIANTS (short selectors via link modifiers)
---------------------------------------------- */

/* Pills */
.cs-nav-link--pill { border-radius: var(--cs-radius-sm); }

.cs-nav-link--pill.cs-active,
.cs-nav-link--pill[aria-current="page"],
.cs-nav-link--pill[aria-current="true"] {
  background-color: var(--cs-nav-primary);
  color: var(--cs-nav-white);
}

/* Tabs container (only the bar) */
.cs-nav-tabs { gap: 0; border-bottom: 1px solid var(--cs-nav-border); }

/* Tabs link variant */
.cs-nav-link--tab {
  border: 1px solid transparent;
  border-top-left-radius: var(--cs-radius-sm);
  border-top-right-radius: var(--cs-radius-sm);
  margin-bottom: -1px;
}

.cs-nav-link--tab.cs-active,
.cs-nav-link--tab[aria-current="page"],
.cs-nav-link--tab[aria-current="true"] {
  color: var(--cs-nav-text-muted);
  background-color: var(--cs-nav-white);
  border-color: var(--cs-nav-border) var(--cs-nav-border) var(--cs-nav-white);
}

/* ----------------------------------------------
   NAVBAR
---------------------------------------------- */

.cs-navbar {
  position: relative;
  z-index: var(--cs-z-nav);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--cs-space-2);
  padding: var(--cs-space-2) var(--cs-space-4);
  background-color: var(--cs-color-bg);
  border-bottom: 1px solid var(--cs-color-border);
}

.cs-navbar.cs-navbar--acrylic {
  background-color: var(--cs-acrylic-bg);
  border-bottom: 1px solid var(--cs-acrylic-border);
}
@supports ((-webkit-backdrop-filter: blur(6px)) or (backdrop-filter: blur(6px))) {
  .cs-navbar.cs-navbar--acrylic {
    -webkit-backdrop-filter: blur(6px);
    backdrop-filter: blur(6px);
  }
}

.cs-navbar-brand {
  display: inline-block;
  padding-top: calc(0.3125rem * var(--cs-density));
  padding-bottom: calc(0.3125rem * var(--cs-density));
  margin-right: var(--cs-space-4);
  font-size: 1.25rem;
  line-height: inherit;
  white-space: nowrap;
  text-decoration: none;
  color: inherit;
}

.cs-navbar-toggle {
  appearance: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: .5ch;
  padding: var(--cs-space-2) var(--cs-space-3);
  border: 1px solid var(--cs-color-border);
  border-radius: var(--cs-radius-sm);
  background: var(--cs-color-white);
  box-shadow: var(--cs-shadow-1);
  cursor: pointer;
  transition: background-color var(--cs-transition), border-color var(--cs-transition), box-shadow var(--cs-transition);
}
.cs-navbar-toggle:hover { background: color-mix(in oklab, var(--cs-color-white), black 5%); }
@supports not (color: color-mix(in oklab, white, black)) {
  .cs-navbar-toggle:hover { background: #f3f4f6; }
}

.cs-navbar-collapse { width: 100%; }

.cs-navbar-nav {
  display: flex;
  flex-direction: column;
  padding-left: 0;
  margin: 0;
  list-style: none;
  gap: var(--cs-space-1);
}

.cs-navbar-nav .cs-nav-link { padding-right: 0; padding-left: 0; }

/* Responsive: stack → row at 768px */
@media (min-width: 768px) {
  .cs-navbar { gap: var(--cs-space-4); }
  .cs-navbar-collapse { display: flex !important; width: auto; }
  .cs-navbar-nav { flex-direction: row; align-items: center; gap: var(--cs-space-3); }
  .cs-navbar-toggle { display: none; }
}

/* Collapse recipe */
.cs-collapsed { display: none; }
.cs-expanded { display: block; }

/* ----------------------------------------------
   ACCESSIBILITY UTILITIES (split into short rules)
---------------------------------------------- */

/* Focus ring (split to avoid long selector list) */
.cs-focus-ring:focus-visible {
  outline: 2px solid color-mix(in oklab, var(--cs-color-primary), white 15%);
  outline-offset: 2px;
}
.cs-nav-link:focus-visible {
  outline: 2px solid color-mix(in oklab, var(--cs-color-primary), white 15%);
  outline-offset: 2px;
}
.cs-navbar-toggle:focus-visible {
  outline: 2px solid color-mix(in oklab, var(--cs-color-primary), white 15%);
  outline-offset: 2px;
}
.cs-navbar-brand:focus-visible {
  outline: 2px solid color-mix(in oklab, var(--cs-color-primary), white 15%);
  outline-offset: 2px;
}

@supports not (color: color-mix(in oklab, white, black)) {
  .cs-focus-ring:focus-visible { outline: 2px solid #66a3ff; outline-offset: 2px; }
  .cs-nav-link:focus-visible { outline: 2px solid #66a3ff; outline-offset: 2px; }
  .cs-navbar-toggle:focus-visible { outline: 2px solid #66a3ff; outline-offset: 2px; }
  .cs-navbar-brand:focus-visible { outline: 2px solid #66a3ff; outline-offset: 2px; }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .cs-nav-link,
  .cs-navbar-toggle,
  .cs-navbar {
    transition: none !important;
    animation: none !important;
    scroll-behavior: auto !important;
  }
}

/* High contrast preferences */
@media (prefers-contrast: more) {
  .cs-navbar { border-bottom-width: 2px; }
  .cs-nav-tabs { border-bottom-width: 2px; }
  .cs-navbar-toggle { border-width: 2px; }
}

/* Forced colors (Windows High Contrast) */
@media (forced-colors: active) {
  .cs-navbar,
  .cs-navbar-toggle,
  .cs-nav-link {
    border: 1px solid CanvasText;
    background: Canvas;
    color: CanvasText;
  }
  .cs-nav-tabs { border-bottom-color: CanvasText; }
  .cs-nav-link--tab.cs-active,
  .cs-nav-link--tab[aria-current="page"],
  .cs-nav-link--tab[aria-current="true"] {
    background: Canvas;
    border-color: CanvasText;
  }
  .cs-focus-ring:focus-visible { outline-color: Highlight; }
}

/* ----------------------------------------------
   OPTIONAL HELPERS
---------------------------------------------- */

.cs-sticky-top { position: sticky; top: 0; z-index: var(--cs-z-sticky); background: var(--cs-color-bg); }
.cs-will-change-transform { will-change: transform; }

.cs-glow { box-shadow: 0 0 0 3px color-mix(in oklab, var(--cs-color-primary), white 75%); }
@supports not (color: color-mix(in oklab, white, black)) {
  .cs-glow { box-shadow: 0 0 0 3px rgba(0,123,255,.25); }
}

.cs-elev-1 { box-shadow: var(--cs-shadow-1); }
.cs-elev-2 { box-shadow: var(--cs-shadow-2); }
.cs-z-dropdown { z-index: var(--cs-z-dropdown); }

/* ----------------------------------------------
   PRINT
---------------------------------------------- */
@media (print) {
  .cs-navbar,
  .cs-navbar-toggle { box-shadow: none !important; }
  .cs-navbar { border-bottom: 1px solid #000 !important; }
  .cs-nav-link { background: transparent !important; }
}

/* ----------------------------------------------
   SMALL-SCREEN TUNING
---------------------------------------------- */
@media (max-width: 480px) {
  .cs-nav-link { padding: calc(0.5rem * var(--cs-density)) var(--cs-space-2); }
  .cs-navbar { padding: var(--cs-space-2) var(--cs-space-3); }
}

/* ----------------------------------------------
   RECIPES
---------------------------------------------- */

.cs-active { font-weight: var(--cs-font-weight-bold); }

.cs-navbar--frosted-edge { box-shadow: inset 0 -1px 0 var(--cs-acrylic-border); }

.cs-dropdown { position: relative; }
.cs-dropdown-menu {
  position: absolute;
  top: 100%;
  left: 0;
  min-width: 12rem;
  margin-top: .25rem;
  padding: .25rem;
  background: var(--cs-color-white);
  border: 1px solid var(--cs-color-border);
  border-radius: var(--cs-radius-sm);
  box-shadow: var(--cs-shadow-2);
  display: none;
}
.cs-dropdown.cs-expanded .cs-dropdown-menu { display: block; }

/* ----------------------------------------------
   LEGACY INPUT PARITY (kept; no long chains)
---------------------------------------------- */

.cs-nav { /* already defined */ }
.cs-nav-item { /* already defined */ }
.cs-nav-link { /* already defined */ }
.cs-nav-link:hover { /* already defined */ }
.cs-nav-link.cs-active { /* already defined */ }
/* Variant classes replace these long chains:
   (was) .cs-nav-pills .cs-nav-link..., .cs-nav-tabs .cs-nav-link...
*/



/* ----------------------------------------------
   ACTIVE INDICATOR: Animated underline on tab
---------------------------------------------- */
.cs-nav-link--tab.cs-active {
  position: relative;
  overflow: hidden;
  z-index: 1;
}
.cs-nav-link--tab.cs-active::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%) scaleX(0);
  width: 100%;
  height: 2px;
  background-color: var(--cs-nav-primary);
  animation: cs-nav-underline-in 240ms var(--cs-ease) forwards;
}

@keyframes cs-nav-underline-in {
  from { transform: translateX(-50%) scaleX(0); }
  to   { transform: translateX(-50%) scaleX(1); }
}

/* ----------------------------------------------
   DROPDOWN MENU: Fade + slide
---------------------------------------------- */
.cs-dropdown-menu {
  opacity: 0;
  transform: translateY(8px);
  transition: opacity 200ms var(--cs-ease), transform 200ms var(--cs-ease);
}
.cs-dropdown.cs-expanded .cs-dropdown-menu {
  opacity: 1;
  transform: translateY(0);
}

/* ----------------------------------------------
   HOVER REVEAL: Delayed fade-in effect
---------------------------------------------- */
.cs-nav-link--pill {
  opacity: 0.85;
  transition: opacity 160ms ease-in-out 80ms;
}
.cs-nav-link--pill:hover {
  opacity: 1;
  transition-delay: 0ms;
}

/* ----------------------------------------------
   TAB RIPPLE (on click) — optional JS trigger
---------------------------------------------- */
.cs-nav-link--tab[data-ripple] {
  position: relative;
  overflow: hidden;
}
.cs-nav-link--tab[data-ripple]::after {
  content: "";
  position: absolute;
  border-radius: 50%;
  background: var(--cs-nav-primary);
  opacity: 0.15;
  transform: scale(0);
  pointer-events: none;
  animation: none;
}
.cs-nav-link--tab[data-ripple].cs-ripple-anim::after {
  top: 50%;
  left: 50%;
  width: 200%;
  height: 200%;
  transform: translate(-50%, -50%) scale(0);
  animation: cs-tab-ripple 400ms ease-out forwards;
}

@keyframes cs-tab-ripple {
  to { transform: translate(-50%, -50%) scale(1); opacity: 0; }
}

/* ----------------------------------------------
   ACCESSIBILITY + REDUCED MOTION
---------------------------------------------- */
@media (prefers-reduced-motion: reduce) {
  .cs-nav-link--tab.cs-active::after,
  .cs-dropdown-menu,
  .cs-nav-link--tab[data-ripple].cs-ripple-anim::after {
    animation: none !important;
    transition: none !important;
  }
}
