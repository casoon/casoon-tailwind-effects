/* =========================================
   THEME OVERRIDES - CS-OVERRIDES LAYER
   ========================================= */

/*
 * Highest specificity layer for:
 * - Theme system overrides 
 * - Responsive behavior overrides
 * - Debug utilities
 * - Force overrides (!important utilities)
 * - A/B testing variants
 * - Experimental features
 * 
 * This layer has the highest specificity and should be used sparingly.
 * Only add styles here that truly need to override everything else.
 */

@layer cs-overrides {
  
  /* ===== THEME SYSTEM OVERRIDES ===== */
  
  /* Dark theme override system */
  [data-theme="dark"] {
    --cs-bg: #0a0a0a;
    --cs-surface: #111111;
    --cs-elev1: #1a1a1a;
    --cs-elev2: #222222;
    --cs-text: #ffffff;
    --cs-text-muted: #a0a0a0;
    --cs-border: #333333;
    --cs-brand: #5c7cff;
    --cs-acrylic-tint: rgba(10, 10, 10, 0.8);
    --cs-acrylic-border: rgba(255, 255, 255, 0.1);
  }
  
  /* Light theme override system */
  [data-theme="light"] {
    --cs-bg: #ffffff;
    --cs-surface: #fafafa;
    --cs-elev1: #ffffff;
    --cs-elev2: #f5f5f5;
    --cs-text: #000000;
    --cs-text-muted: #666666;
    --cs-border: #e0e0e0;
    --cs-brand: #2563eb;
    --cs-acrylic-tint: rgba(255, 255, 255, 0.8);
    --cs-acrylic-border: rgba(0, 0, 0, 0.1);
  }
  
  /* High contrast theme override */
  [data-theme="high-contrast"] {
    --cs-bg: #ffffff;
    --cs-surface: #ffffff;
    --cs-elev1: #ffffff;
    --cs-text: #000000;
    --cs-border: #000000;
    --cs-brand: #0000ff;
    --cs-shadow-1: 0 2px 4px rgba(0, 0, 0, 0.8);
    --cs-shadow-2: 0 4px 8px rgba(0, 0, 0, 0.8);
  }
  
  /* ===== DENSITY OVERRIDES ===== */
  
  /* Compact density */
  [data-density="compact"] {
    --cs-density: 0.75;
    --cs-radius: 6px;
    --cs-space-4: 12px; /* Override default for compact mode */
  }
  
  /* Comfortable density */
  [data-density="comfortable"] {
    --cs-density: 1.25;
    --cs-radius: 12px;
  }
  
  /* ===== RESPONSIVE OVERRIDES ===== */
  
  /* Mobile-specific overrides that need high priority */
  @media (max-width: 640px) {
    .cs-hide-mobile {
      display: none !important;
    }
    
    .cs-full-width-mobile {
      width: 100% !important;
      margin-inline: 0 !important;
    }
    
    /* Reduce blur effects on mobile for performance */
    .cs-glass-card,
    .cs-acrylic {
      backdrop-filter: blur(4px) !important;
    }
    
    /* Increase touch targets on mobile */
    .cs-glass-button,
    .cs-focus-ring {
      min-height: 44px !important;
      min-width: 44px !important;
    }
  }
  
  /* Desktop-specific overrides */
  @media (min-width: 1024px) {
    .cs-hide-desktop {
      display: none !important;
    }
    
    /* Enhanced effects on larger screens */
    .cs-glass-card:hover {
      backdrop-filter: blur(20px) saturate(150%) !important;
    }
  }
  
  /* ===== ACCESSIBILITY OVERRIDES ===== */
  
  /* Reduced motion overrides - highest priority */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
    
    /* Specific overrides for our components */
    .cs-glass-card:hover,
    .cs-modal-in,
    .cs-toast-out,
    .cs-fade-in {
      transform: none !important;
      animation: none !important;
    }
  }
  
  /* High contrast mode overrides */
  @media (prefers-contrast: more) {
    .cs-glass-card,
    .cs-acrylic {
      backdrop-filter: none !important;
      background: var(--cs-surface) !important;
      border-width: 2px !important;
      border-color: var(--cs-text) !important;
    }
    
    .cs-focus-ring:focus-visible {
      outline: 3px solid var(--cs-brand) !important;
      outline-offset: 2px !important;
    }
  }
  
  /* ===== DEBUG UTILITIES ===== */
  
  /* Debug mode - shows outlines on all elements */
  [data-debug="outlines"] * {
    outline: 1px solid red !important;
    outline-offset: -1px !important;
  }
  
  [data-debug="grid"] {
    background-image: 
      linear-gradient(rgba(255, 0, 0, 0.1) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255, 0, 0, 0.1) 1px, transparent 1px) !important;
    background-size: 20px 20px !important;
  }
  
  /* Debug spacing - shows padding and margins */
  [data-debug="spacing"] * {
    background-color: rgba(0, 255, 0, 0.1) !important;
    box-shadow: inset 0 0 0 1px rgba(255, 0, 0, 0.2) !important;
  }
  
  /* Debug z-index layers */
  [data-debug="z-index"] * {
    position: relative !important;
  }
  
  [data-debug="z-index"] *::before {
    content: attr(class) " z:" attr(style) !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    font-size: 10px !important;
    background: rgba(255, 255, 0, 0.8) !important;
    color: black !important;
    padding: 2px !important;
    z-index: 999999 !important;
    pointer-events: none !important;
  }
  
  /* ===== FORCE UTILITIES ===== */
  
  /* Sometimes you need !important - use sparingly */
  .cs-force-hide {
    display: none !important;
  }
  
  .cs-force-show {
    display: block !important;
  }
  
  .cs-force-full-width {
    width: 100% !important;
  }
  
  .cs-force-center {
    margin-left: auto !important;
    margin-right: auto !important;
  }
  
  .cs-force-text-center {
    text-align: center !important;
  }
  
  .cs-force-no-pointer {
    pointer-events: none !important;
  }
  
  /* ===== EXPERIMENTAL FEATURES ===== */
  
  /* Feature flags for experimental CSS */
  [data-experiment="new-glass"] .cs-glass-card {
    background: color-mix(in oklab, var(--cs-surface) 60%, transparent) !important;
    backdrop-filter: blur(20px) saturate(180%) !important;
  }
  
  [data-experiment="enhanced-focus"] .cs-focus-ring:focus-visible {
    box-shadow: 
      0 0 0 2px var(--cs-brand),
      0 0 0 4px color-mix(in srgb, var(--cs-brand) 30%, transparent),
      0 0 12px color-mix(in srgb, var(--cs-brand) 50%, transparent) !important;
  }
  
  /* ===== PRINT OVERRIDES ===== */
  
  @media print {
    /* Force print-friendly styles */
    * {
      backdrop-filter: none !important;
      box-shadow: none !important;
      animation: none !important;
      transition: none !important;
    }
    
    .cs-glass-card,
    .cs-acrylic {
      background: white !important;
      border: 1px solid black !important;
    }
    
    .cs-hide-print {
      display: none !important;
    }
    
    .cs-show-print {
      display: block !important;
    }
  }
}

/* ===== OVERRIDE LAYER DOCUMENTATION ===== */
/*
 * Usage Guidelines for cs-overrides:
 * 
 * ✅ DO use for:
 * - Theme system overrides
 * - Critical responsive behavior
 * - Accessibility compliance
 * - Debug utilities
 * - Print styles
 * - A/B test variants
 * 
 * ❌ DON'T use for:
 * - Regular component styles (use cs-components)
 * - Utility classes (use cs-utilities)  
 * - Design tokens (use cs-tokens)
 * - Regular responsive design (use appropriate layers)
 * 
 * Remember: This layer has the highest specificity.
 * Use it responsibly and sparingly.
 */
