/* =========================================
   OPTIONAL ADD-ON: Acrylic surface
   ========================================= */
@layer cs-components {
  .cs-acrylic {
    background: var(--cs-acrylic-tint, rgba(20, 22, 26, 0.55));
    border: 1px solid var(--cs-acrylic-border, rgba(255, 255, 255, 0.06));
    border-radius: var(--cs-radius, 10px);
    box-shadow: var(
      --cs-shadow-2,
      0 8px 24px rgba(0, 0, 0, 0.22),
      0 2px 8px rgba(0, 0, 0, 0.18)
    );
    -webkit-backdrop-filter: saturate(140%) blur(10px);
    backdrop-filter: saturate(140%) blur(10px);
    background-clip: padding-box;
  }
  @supports (
      (-webkit-backdrop-filter: blur(1px)) or
      (backdrop-filter: blur(1px))
    ) {
    .cs-acrylic {
      -webkit-backdrop-filter: saturate(160%) blur(var(--cs-acrylic-blur, 14px));
      backdrop-filter: saturate(160%) blur(var(--cs-acrylic-blur, 14px));
    }
  }
  @media (max-width: 480px) {
    .cs-acrylic {
      --cs-acrylic-blur: 8px;
      box-shadow: var(
        --cs-shadow-1,
        0 1px 2px rgba(0, 0, 0, 0.25),
        0 1px 1px rgba(0, 0, 0, 0.1)
      );
    }
  }
  .cs-acrylic[data-deferred] {
    content-visibility: auto;
    contain-intrinsic-size: 300px 200px;
  }
}

/* =========================================
   SEMANTIC FEEDBACK BANNERS
   ========================================= */
@layer cs-components {
  .cs-banner {
    border-radius: var(--cs-radius);
    padding: var(--cs-space-3) var(--cs-space-4);
    display: grid;
    gap: var(--cs-space-2);
    border: 1px solid var(--cs-border);
    background: linear-gradient(
        0deg,
        color-mix(in srgb, var(--_tone) 12%, transparent),
        transparent
      )
      var(--cs-elev1);
  }
  .cs-banner strong {
    font-weight: 600;
  }
  .cs-banner[data-tone="info"] {
    --_tone: var(--cs-info);
  }
  .cs-banner[data-tone="success"] {
    --_tone: var(--cs-success);
  }
  .cs-banner[data-tone="warning"] {
    --_tone: var(--cs-warning);
  }
  .cs-banner[data-tone="danger"] {
    --_tone: var(--cs-danger);
  }
}

/* =========================================
   DIALOG/OVERLAY PRIMITIVES (no JS required)
   ========================================= */
@layer cs-components {
  .cs-backdrop {
    position: fixed;
    inset: 0;
    background: color-mix(in srgb, #000 55%, transparent);
    backdrop-filter: blur(2px);
    z-index: var(--cs-z-modal);
  }
  .cs-modal {
    margin: auto;
    max-inline-size: min(680px, 92cqi);
    background: var(--cs-elev1);
    color: var(--cs-text);
    border: 1px solid var(--cs-border);
    border-radius: var(--cs-radius);
    box-shadow: var(--cs-shadow-2);
    padding: var(--cs-space-6);
  }
  .cs-modal header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--cs-space-2);
  }
  .cs-modal [data-close].cs-focus-ring {
    inline-size: 40px;
    block-size: 40px;
    border-radius: 999px;
  }

  /* :target-based modal pattern (progressive, hash navigation) */
  .cs-modal-target {
    display: none;
  }
  .cs-modal-target:target {
    display: grid;
    place-items: center;
  }
}

/* =========================================
   HAS()-POWER: stateful recipes without JS
   ========================================= */
@layer cs-components {
  @supports selector(:has(+ *)) {
    .cs-disclosure {
      border: 1px solid var(--cs-border);
      border-radius: var(--cs-radius);
      background: var(--cs-elev1);
    }
    .cs-disclosure > summary {
      list-style: none;
      padding: var(--cs-space-3) var(--cs-space-4);
      cursor: pointer;
    }
    .cs-disclosure > summary::-webkit-details-marker {
      display: none;
    }

    /* Formfeld mit Fehlerzustand, wenn folgendes .cs-error angezeigt wird */
    .cs-field:has(+ .cs-error) {
      border-color: var(--cs-danger);
    }
  }
  /* Correct open state (does not rely on :has) */
  details.cs-disclosure[open] {
    box-shadow: var(--cs-shadow-1);
  }
}

/* =========================================
   TOKENS: EMPHASIS & CONTRAST BUMP
   ========================================= */
@layer cs-components {
  .cs-contrast-bump {
    --cs-text: #fff;
    --cs-text-muted: #d6dbe6;
    --cs-border: color-mix(in srgb, var(--cs-text) 12%, transparent);
    filter: saturate(1.05) contrast(1.05);
  }
}
