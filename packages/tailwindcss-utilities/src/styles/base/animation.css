/* =========================================
   ANIMATION: Tokens, Keyframes, Recipes
   ========================================= */
@layer cs-base {
  @keyframes cs-fade-in {
    from {
      opacity: 0;
      transform: translateY(4px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  @keyframes cs-slide-down {
    from {
      opacity: 0;
      transform: translateY(-8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  @keyframes cs-toast-out {
    to {
      opacity: 0;
      transform: translateY(8px);
    }
  }
}

@layer cs-components {
  .cs-modal-in {
    animation: cs-fade-in var(--cs-anim-duration-md) var(--cs-anim-ease-out);
    will-change: opacity, transform;
  }
  .cs-popover-in {
    animation: cs-slide-down var(--cs-anim-duration-sm) var(--cs-anim-ease-out);
    will-change: opacity, transform;
  }
  .cs-toast-out {
    animation: cs-toast-out var(--cs-anim-duration-md) var(--cs-anim-ease-in);
    will-change: opacity, transform;
  }

  /* Fallback on mount (e.g., inside modal) */
  .cs-pop {
    animation: cs-fade-in var(--cs-anim-duration-md) var(--cs-anim-ease-out);
  }

  /* View transitions (opt-in) */
  .cs-views-enable .cs-vt-page {
    view-transition-name: cs-page;
  }
  @media (prefers-reduced-motion: no-preference) {
    ::view-transition-old(cs-page),
    ::view-transition-new(cs-page) {
      animation-duration: var(--cs-anim-duration-lg);
    }
  }

  /* Scroll-driven reveals (with graceful fallback) */
  .cs-reveal {
    opacity: 0;
    transform: translateY(8px);
    will-change: opacity, transform;
  }
  @supports (animation-timeline: scroll()) {
    @keyframes cs-reveal-kf {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .cs-reveal {
      animation: cs-reveal-kf var(--cs-anim-duration-lg) var(--cs-anim-ease-out)
        both;
      animation-timeline: view();
      animation-range: entry 20% cover 30%;
    }
  }
}
