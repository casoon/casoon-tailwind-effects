/* ========================================================================
   @casoon/tailwindcss-utilities - Flattened CSS Distribution
   Tailwind CSS v4 compatible utilities without deep @layer nesting
   ===================================================================== */

/* Import tokens first */
@import "./tokens.css";

/* @casoon/tailwindcss-utilities */
/* Practical, neutral utilities for Tailwind CSS v4 (cs- prefix, tokens required) */

  /* ===== Page & Base Surfaces ===== */
  .cs-page {
    background: var(--cs-bg-page);
    color: var(--cs-text-primary);

  .cs-surface {
    background: var(--cs-bg-surface);
    color: var(--cs-text-primary);

  .cs-surface-elevated {
    background: var(--cs-bg-elevated);
    box-shadow: var(--cs-shadow-1);

  /* ===== Container / Sections / Layout ===== */
  .cs-container {
    max-width: var(--cs-container-max);
    margin-inline: auto;
    padding-inline: var(--cs-container-pad-inline);

  .cs-section {
    padding-block: clamp(var(--cs-section-min), 6vw, var(--cs-section-max));

  /* Vertical Stack (gap-controlled flow layout) */
  .cs-stack { display: grid; gap: var(--cs-grid-gap); }
  .cs-stack-sm { display: grid; gap: var(--cs-size-3); }
  .cs-stack-lg { display: grid; gap: var(--cs-size-8); }

  /* Inline Cluster (row wrap with gap) */
  .cs-cluster {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: var(--cs-grid-gap);

  /* Responsive Cards Grid (auto-fit) */
  .cs-grid-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(var(--cs-grid-min), 1fr));
    gap: var(--cs-grid-gap);

  /* Sidebar Grid (content + sidebar) */
  .cs-grid-sidebar {
    display: grid;
    grid-template-columns: minmax(0, 1fr) minmax(16rem, 24rem);
    gap: var(--cs-grid-gap);

  @container (max-width: 56rem) {
    .cs-grid-sidebar { grid-template-columns: 1fr; }

  /* 12-col Utility Grid (CSS vars for spans) */
  .cs-grid-12 {
    --cs-cols: 12;
    display: grid;
    grid-template-columns: repeat(var(--cs-cols), minmax(0, 1fr));
    gap: var(--cs-grid-gap);

  .cs-col-span {
    grid-column: span var(--span, 12) / span var(--span, 12);

  /* ===== Hero (neutral) ===== */
  .cs-hero {
    min-height: 60vh;
    display: grid;
    place-items: center;
    position: relative;
    overflow: clip;

  /* ===== Cards (neutral) ===== */
  .cs-card {
    background: var(--cs-bg-surface);
    border: 1px solid var(--cs-border-color);
    border-radius: var(--cs-radius);
    box-shadow: var(--cs-shadow-1);
    transition:
      box-shadow var(--cs-transition-base) ease,
      transform var(--cs-transition-base) ease;

  .cs-card-hover-lift:hover {
    transform: translateY(-2px);
    box-shadow: var(--cs-shadow-2);

  .cs-card-pad    { padding: clamp(1rem, 3vw, 1.25rem); }
  .cs-card-pad-lg { padding: clamp(1.25rem, 4vw, 1.75rem); }
  .cs-card-inset  { border-color: color-mix(in oklab, var(--cs-border-color) 70%, transparent); }

  /* ===== Typography Helpers (neutral) ===== */
  .cs-text-primary   { color: var(--cs-text-primary); }
  .cs-text-secondary { color: var(--cs-text-secondary); }
  .cs-text-muted     { color: var(--cs-text-muted); }

  .cs-text-balance { text-wrap: balance; }
  .cs-text-pretty  { text-wrap: pretty; }
  .cs-text-truncate { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .cs-text-2lines {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;

  .cs-hyphens-auto { hyphens: auto; }

  /* ===== Aspect Ratio ===== */
  .cs-aspect { position: relative; width: 100%; }
  .cs-aspect::before {
    content: ""; display: block; padding-top: var(--ratio, var(--cs-aspect-16-9));

  .cs-aspect > * {
    position: absolute; inset: 0; width: 100%; height: 100%;

  .cs-aspect-square { --ratio: var(--cs-aspect-1-1); }

  /* ===== Media Helpers ===== */
  .cs-media-fit-cover { object-fit: cover; }
  .cs-media-fit-contain { object-fit: contain; }
  .cs-media-rounded { border-radius: var(--cs-radius); }

  /* ===== Forms (neutral defaults) ===== */
  .cs-input {
    appearance: none;
    background: var(--cs-bg-surface);
    border: 1px solid var(--cs-border-color);
    color: var(--cs-text-primary);
    border-radius: var(--cs-radius-sm);
    padding: 0.5rem 0.75rem;
    line-height: 1.5;

  /* Variants */
  .cs-input-outline { background: transparent; border-color: color-mix(in oklab, var(--cs-border-color) 80%, transparent); }
  .cs-input-filled  { background: color-mix(in oklab, var(--cs-bg-surface) 85%, transparent); }
  .cs-input-minimal { background: transparent; border-color: transparent; border-bottom: 1px solid var(--cs-border-color); border-radius: 0; }
  /* Sizes */
  .cs-input-sm { padding: 0.375rem 0.5rem; font-size: .9rem; }
  .cs-input-lg { padding: 0.75rem 1rem; font-size: 1.05rem; }
  .cs-input::placeholder { color: var(--cs-text-muted); }
  .cs-input:focus {
    outline: none;
    box-shadow:
      0 0 0 var(--cs-focus-offset) var(--cs-bg-surface),
      0 0 0 calc(var(--cs-focus-ring) + var(--cs-focus-offset))
        color-mix(in oklab, var(--cs-focus-color) 85%, transparent);

  /* States & groups */
  .cs-input-focus:focus { outline: none; box-shadow:
      0 0 0 var(--cs-focus-offset) var(--cs-bg-surface),
      0 0 0 calc(var(--cs-focus-ring) + var(--cs-focus-offset)) color-mix(in oklab, var(--cs-focus-color) 85%, transparent);

  .cs-input-hover:hover { border-color: color-mix(in oklab, var(--cs-border-color) 70%, transparent); }
  .cs-input-active:active { transform: translateY(1px); }
  .cs-input-disabled,
  .cs-input:disabled { opacity: .6; cursor: not-allowed; }

  /* Input Groups */
  .cs-input-group {
    display: flex;
    align-items: stretch;

  .cs-input-group-horizontal { display: flex; flex-direction: row; align-items: stretch; }
  .cs-input-group-vertical { display: flex; flex-direction: column; align-items: stretch; }

  /* Horizontal merge */
  .cs-input-group,
  .cs-input-group-horizontal {
    /* Merge adjacent borders */

  .cs-input-group > .cs-input:first-child,
  .cs-input-group-horizontal > .cs-input:first-child {
    border-top-right-radius: 0; border-bottom-right-radius: 0;

  .cs-input-group > .cs-input + .cs-input,
  .cs-input-group-horizontal > .cs-input + .cs-input {
    border-left-width: 0;

  .cs-input-group > .cs-input:last-child,
  .cs-input-group-horizontal > .cs-input:last-child {
    border-top-left-radius: 0; border-bottom-left-radius: 0;

  /* Vertical merge */
  .cs-input-group-vertical > .cs-input + .cs-input { border-top-width: 0; }
  .cs-input-group-vertical > .cs-input { border-radius: 0; }
  .cs-input-group-vertical > .cs-input:first-child { border-top-left-radius: var(--cs-radius-sm); border-top-right-radius: var(--cs-radius-sm); }
  .cs-input-group-vertical > .cs-input:last-child { border-bottom-left-radius: var(--cs-radius-sm); border-bottom-right-radius: var(--cs-radius-sm); }

  /* Addons (text/label/buttons that visually attach to inputs) */
  .cs-input-addon {
    display: inline-flex; align-items: center; padding: 0 0.75rem;
    background: var(--cs-bg-elevated);
    color: var(--cs-text-secondary);
    border: 1px solid var(--cs-border-color);
    line-height: 1.5;
    white-space: nowrap;

  /* Horizontal addon radii */
  .cs-input-group > .cs-input-addon:first-child,
  .cs-input-group-horizontal > .cs-input-addon:first-child {
    border-top-right-radius: 0; border-bottom-right-radius: 0;
    border-right-width: 0;
    border-top-left-radius: var(--cs-radius-sm); border-bottom-left-radius: var(--cs-radius-sm);

  .cs-input-group > .cs-input-addon:last-child,
  .cs-input-group-horizontal > .cs-input-addon:last-child {
    border-top-left-radius: 0; border-bottom-left-radius: 0;
    border-left-width: 0;
    border-top-right-radius: var(--cs-radius-sm); border-bottom-right-radius: var(--cs-radius-sm);

  /* Ensure adjacent input gets merged border with addon */
  .cs-input-group > .cs-input-addon + .cs-input,
  .cs-input-group-horizontal > .cs-input-addon + .cs-input { border-left-width: 0; }
  .cs-input-group > .cs-input + .cs-input-addon,
  .cs-input-group-horizontal > .cs-input + .cs-input-addon { border-left-width: 0; }

  /* Vertical addon radii */
  .cs-input-group-vertical > .cs-input-addon { border-radius: 0; }
  .cs-input-group-vertical > .cs-input-addon:first-child {
    border-bottom-width: 0;
    border-top-left-radius: var(--cs-radius-sm); border-top-right-radius: var(--cs-radius-sm);

  .cs-input-group-vertical > .cs-input-addon:last-child {
    border-top-width: 0;
    border-bottom-left-radius: var(--cs-radius-sm); border-bottom-right-radius: var(--cs-radius-sm);

  .cs-input-group-vertical > .cs-input-addon + .cs-input { border-top-width: 0; }
  .cs-input-group-vertical > .cs-input + .cs-input-addon { border-top-width: 0; }

  /* Group focus ring (wrap group with focus state when any control focused) */
  .cs-input-group:focus-within,
  .cs-input-group-horizontal:focus-within,
  .cs-input-group-vertical:focus-within {
    box-shadow:
      0 0 0 var(--cs-focus-offset) var(--cs-bg-surface),
      0 0 0 calc(var(--cs-focus-ring) + var(--cs-focus-offset)) color-mix(in oklab, var(--cs-focus-color) 85%, transparent);
    border-radius: var(--cs-radius-sm);

  .cs-btn {
    display: inline-flex; align-items: center; justify-content: center; gap: 0.5rem;
    border-radius: var(--cs-radius);
    border: 1px solid var(--cs-border-color);
    padding: 0.625rem 0.9rem;
    background: var(--cs-bg-elevated);
    color: var(--cs-text-primary);
    transition:
      background-color var(--cs-transition-base) ease,
      border-color var(--cs-transition-base) ease;

  .cs-btn-outline {
    background: transparent;
    color: var(--cs-text-primary);
    border-color: color-mix(in oklab, var(--cs-border-color) 80%, transparent);

  .cs-btn-ghost { background: transparent; border-color: transparent; }
  .cs-btn-link { background: transparent; border-color: transparent; padding-inline: .25rem; }
  .cs-btn-3d:hover { transform: translateY(-2px); box-shadow: var(--cs-shadow-2); }
  .cs-btn:hover {
    border-color: color-mix(in oklab, var(--cs-border-color) 70%, transparent);

  .cs-btn:focus {
    outline: none;
    box-shadow:
      0 0 0 var(--cs-focus-offset) var(--cs-bg-elevated),
      0 0 0 calc(var(--cs-focus-ring) + var(--cs-focus-offset))
        color-mix(in oklab, var(--cs-focus-color) 85%, transparent);

  /* States */
  .cs-btn-hover:hover { filter: brightness(1.05); }
  .cs-btn-active:active { transform: translateY(1px); }
  .cs-btn-focus:focus-visible { outline: none; box-shadow:
      0 0 0 var(--cs-focus-offset) var(--cs-bg-elevated),
      0 0 0 calc(var(--cs-focus-ring) + var(--cs-focus-offset)) color-mix(in oklab, var(--cs-focus-color) 85%, transparent);

  .cs-btn-disabled,
  .cs-btn[aria-disabled="true"],
  .cs-btn:disabled { opacity: .6; cursor: not-allowed; }
  .cs-btn-sm { padding: 0.45rem 0.7rem; font-size: .9rem; }
  .cs-btn-lg { padding: 0.8rem 1.1rem; font-size: 1.05rem; }
  .cs-btn-xl { padding: 1rem 1.25rem; font-size: 1.15rem; }

  .cs-btn-group { display: inline-flex; align-items: stretch; }
  .cs-btn-group .cs-btn { border-radius: 0; }
  .cs-btn-group .cs-btn:first-child { border-top-left-radius: var(--cs-radius); border-bottom-left-radius: var(--cs-radius); }
  .cs-btn-group .cs-btn:last-child  { border-top-right-radius: var(--cs-radius); border-bottom-right-radius: var(--cs-radius); }
  .cs-btn-group-vertical { display: inline-flex; flex-direction: column; }
  .cs-btn-group-vertical .cs-btn { border-radius: 0; }
  .cs-btn-group-vertical .cs-btn:first-child { border-top-left-radius: var(--cs-radius); border-top-right-radius: var(--cs-radius); }
  .cs-btn-group-vertical .cs-btn:last-child  { border-bottom-left-radius: var(--cs-radius); border-bottom-right-radius: var(--cs-radius); }

  /* Input groups & controls */
  .cs-field { display: grid; gap: var(--cs-size-2); }
  .cs-field-inline { display: flex; align-items: center; gap: var(--cs-size-3); }

  /* ===== Focus & Accessibility ===== */
  .cs-focus-ring {
    outline: none;
    box-shadow:
      0 0 0 var(--cs-focus-offset) currentColor,
      0 0 0 calc(var(--cs-focus-ring) + var(--cs-focus-offset))
        color-mix(in oklab, var(--cs-focus-color) 85%, transparent);

  .cs-visually-hidden {
    position: absolute !important;
    height: 1px; width: 1px;
    margin: -1px; padding: 0;
    border: 0; overflow: hidden; clip: rect(0 0 0 0); clip-path: inset(50%);
    white-space: nowrap;

  .cs-kbd {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
    font-size: 0.875em;
    padding: 0.15em 0.4em;
    border: 1px solid var(--cs-border-color);
    border-bottom-width: 2px;
    border-radius: var(--cs-radius-xs);
    background: var(--cs-bg-elevated);

  /* ===== Safe Area & Logical helpers ===== */
  .cs-safe-pi { padding-inline: max(var(--cs-container-pad-inline), env(safe-area-inset-left, 0px)); }
  .cs-safe-pb { padding-bottom: env(safe-area-inset-bottom, 0px); }
  .cs-safe-pt { padding-top: env(safe-area-inset-top, 0px); }

  /* ===== Loading / Spinners / Progress ===== */
  @keyframes csSpin { to { transform: rotate(360deg) } }
  @keyframes csPulse { 0%,100%{ opacity: .4 } 50%{ opacity: 1 } }
  @keyframes csBar { 0%{ transform: translateX(-100%) } 100%{ transform: translateX(100%) } }

  /* Base spinner container */
  .spinner { display: inline-grid; place-items: center; width: 2rem; height: 2rem; }
  .spinner-sm { width: 1.25rem; height: 1.25rem; }
  .spinner-lg { width: 2.75rem; height: 2.75rem; }

  /* Dots */
  .spinner-dots { display: inline-flex; gap: .3rem; }
  .spinner-dots::before, .spinner-dots::after, .spinner-dots span {
    content: ""; width: .45em; height: .45em; border-radius: 50%; background: currentColor; animation: csPulse 1s ease-in-out infinite;

  .spinner-dots::after { animation-delay: .2s }
  .spinner-dots span { animation-delay: .4s }

  /* Bars */
  .spinner-bars { position: relative; overflow: hidden; width: 4rem; height: .35rem; border-radius: 999px; background: color-mix(in oklab, currentColor 12%, transparent); }
  .spinner-bars::after { content: ""; position: absolute; inset: 0; width: 40%; background: currentColor; border-radius: inherit; animation: csBar 1s linear infinite; }

  /* Rings */
  .spinner-rings { width: 2rem; height: 2rem; border-radius: 50%; border: 2px solid color-mix(in oklab, currentColor 30%, transparent); border-top-color: currentColor; animation: csSpin .8s linear infinite; }

  /* Pulse */
  .spinner-pulse { width: 1.5rem; height: 1.5rem; border-radius: 50%; background: currentColor; animation: csPulse 1s ease-in-out infinite; }

  /* Generic loading state */
  .loading { pointer-events: none; opacity: .7; }

  /* Overlay */
  .loading-overlay { position: relative; }
  .loading-overlay::after { content: ""; position: absolute; inset: 0; background: color-mix(in oklab, var(--cs-bg-page) 45%, transparent); backdrop-filter: blur(2px); }

  /* Skeleton */
  .loading-skeleton { position: relative; overflow: hidden; background: color-mix(in oklab, currentColor 8%, transparent); border-radius: var(--cs-radius); }
  .loading-skeleton::after { content: ""; position: absolute; inset: 0; background: linear-gradient(90deg, transparent, color-mix(in oklab, currentColor 15%, transparent), transparent); transform: translateX(-100%); animation: csBar 1.2s ease-in-out infinite; }

  /* Progress */
  .progress { height: .5rem; background: color-mix(in oklab, currentColor 12%, transparent); border-radius: 999px; overflow: hidden; }
  .progress > .progress-fill { height: 100%; background: currentColor; width: var(--progress, 0%); transition: width .2s ease; }
  .progress-striped > .progress-fill { background-image: repeating-linear-gradient(45deg, color-mix(in oklab, var(--cs-ink-light, #fff) 35%, transparent) 0 10px, color-mix(in oklab, var(--cs-ink-light, #fff) 15%, transparent) 10px 20px); }
  .progress-animated > .progress-fill { position: relative; }
  .progress-animated > .progress-fill::after { content: ""; position: absolute; inset: 0; background-image: linear-gradient(90deg, transparent, color-mix(in oklab, var(--cs-ink-light, #fff) 35%, transparent), transparent); animation: csBar 1s linear infinite; }

  /* ===== Utility Alignment ===== */
  .cs-center { display: grid; place-items: center; }
  .cs-max-w-prose { max-width: 70ch; }

  /* ===== Responsive Helpers ===== */
  @media (max-width: 48rem) {
    .cs-container { padding-inline: 1rem; }
    .cs-grid-cards { grid-template-columns: 1fr; gap: var(--cs-size-4); }
    .cs-grid-sidebar { grid-template-columns: 1fr; }

  /* ===== Reduced Motion Respect ===== */
  @media (prefers-reduced-motion: reduce) {
    *:where(.cs-card, .cs-btn) { transition: none !important; }