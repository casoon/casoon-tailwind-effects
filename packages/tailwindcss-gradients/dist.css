/* ========================================================================
   @casoon/tailwindcss-gradients - Flattened CSS Distribution
   Tailwind CSS v4 compatible utilities without deep @layer nesting
   ===================================================================== */

/* Import tokens first */
@import "./tokens.css";

  /* ============================================================
     Bestehende Klassen – jetzt tokenisiert
     ============================================================ */

  /* Dezenter Section-Gradient (neutral benannt) */
  .gradient-bg-surface-subtle {
    background: linear-gradient(
      var(--gradient-angle),
      var(--gradient-surface-subtle-from) 0%,
      var(--gradient-surface-subtle-to) 100%
    );

  /* Marken-/Akzentverlauf (linear) */
  .gradient-bg {
    background: linear-gradient(
      var(--gradient-angle),
      var(--gradient-stop-1),
      var(--gradient-stop-2),
      var(--gradient-stop-3)
    );
    background-origin: border-box;
    background-clip: border-box;

  /* Animierter Markenverlauf */
  .gradient-bg-animated {
    background: linear-gradient(
      270deg,
      var(--gradient-accent-from),
      var(--gradient-accent-to),
      var(--gradient-primary-from)
    );
    background-size: var(--gradient-anim-size);
    animation: gradientShift var(--gradient-anim-duration) var(--gradient-anim-timing) infinite var(--gradient-anim-direction);
    will-change: background-position;

  /* Text: neutraler Verlauf */
  .gradient-text {
    background: linear-gradient(var(--gradient-angle), var(--text-grad-from), var(--text-grad-to));
    -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;

  /* Text: Akzentverlauf */
  .gradient-accent-text {
    background: linear-gradient(var(--gradient-angle), var(--text-accent-from), var(--text-accent-to));
    -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;

  /* ============================================================
     Neue Utilities – Linear, Radial, Conic
     ============================================================ */

  .gradient-bg-linear {
    /* Nutzt zentrale Stop-Definitionen */
    background: linear-gradient(
      var(--gradient-angle),
      var(--gradient-stop-1),
      var(--gradient-stop-2),
      var(--gradient-stop-3)
    );

  .gradient-bg-radial {
    background: radial-gradient(
      var(--gradient-shape) var(--gradient-size) at var(--gradient-position),
      var(--gradient-stop-1),
      var(--gradient-stop-2),
      var(--gradient-stop-3)
    );

  .gradient-bg-conic {
    background: conic-gradient(
      from var(--gradient-conic-angle) at var(--gradient-position),
      var(--gradient-stop-1),
      var(--gradient-stop-2),
      var(--gradient-stop-3)
    );

  /* Text gradient angle presets (aliases for readability) */
  .gradient-text-angle-0   { --gradient-angle: 0deg; }
  .gradient-text-angle-45  { --gradient-angle: 45deg; }
  .gradient-text-angle-90  { --gradient-angle: 90deg; }
  .gradient-text-angle-135 { --gradient-angle: 135deg; }
  .gradient-text-angle-180 { --gradient-angle: 180deg; }
  .gradient-text-angle-225 { --gradient-angle: 225deg; }
  .gradient-text-angle-270 { --gradient-angle: 270deg; }
  .gradient-text-angle-315 { --gradient-angle: 315deg; }

  /* Layered dual gradient (accent + primary) */
  .gradient-bg-duo {
    background:
      linear-gradient(var(--gradient-angle),
        var(--gradient-accent-from),
        var(--gradient-accent-mid) var(--gradient-stop-mid-pct, 50%),
        var(--gradient-accent-to)
      ),
      linear-gradient(calc(var(--gradient-angle) + 45deg),
        var(--gradient-primary-from),
        var(--gradient-primary-mid) var(--gradient-stop-mid-pct, 50%),
        var(--gradient-primary-to)
      );
    background-blend-mode: screen;

  /* High contrast boost (opt-in) */
  .gradient-hc {}
  @media (prefers-contrast: more) {
    .gradient-hc { filter: contrast(1.1) saturate(1.05); }

  /* ===== Angle / Shape / Position Utilities ===== */
  /* Angle presets */
  .gradient-angle-0   { --gradient-angle: 0deg; }
  .gradient-angle-45  { --gradient-angle: 45deg; }
  .gradient-angle-90  { --gradient-angle: 90deg; }
  .gradient-angle-135 { --gradient-angle: 135deg; }
  .gradient-angle-180 { --gradient-angle: 180deg; }
  .gradient-angle-225 { --gradient-angle: 225deg; }
  .gradient-angle-270 { --gradient-angle: 270deg; }
  .gradient-angle-315 { --gradient-angle: 315deg; }

  /* Radial shape/size */
  .gradient-shape-circle  { --gradient-shape: circle; }
  .gradient-shape-ellipse { --gradient-shape: ellipse; }
  .gradient-size-closest-side   { --gradient-size: closest-side; }
  .gradient-size-closest-corner { --gradient-size: closest-corner; }
  .gradient-size-farthest-side  { --gradient-size: farthest-side; }
  .gradient-size-farthest-corner{ --gradient-size: farthest-corner; }

  /* Position presets */
  .gradient-pos-tl { --gradient-position: 0% 0%; }
  .gradient-pos-tc { --gradient-position: 50% 0%; }
  .gradient-pos-tr { --gradient-position: 100% 0%; }
  .gradient-pos-cl { --gradient-position: 0% 50%; }
  .gradient-pos-cc { --gradient-position: 50% 50%; }
  .gradient-pos-cr { --gradient-position: 100% 50%; }
  .gradient-pos-bl { --gradient-position: 0% 100%; }
  .gradient-pos-bc { --gradient-position: 50% 100%; }
  .gradient-pos-br { --gradient-position: 100% 100%; }

  /* ============================================================
     Modifiers & Helfer
     ============================================================ */

  /* Overlay-Layer (Noise + Lighten/Soft-Light etc.) */
  .gradient-overlay { position: relative; isolation: isolate; }
  .gradient-overlay::after {
    content: ""; position: absolute; inset: 0; pointer-events: none; z-index: 0;
    background:
      radial-gradient(1px 1px at 25% 32%, color-mix(in oklab, var(--gradient-ink-dark, #000) 35%, transparent) 50%, transparent 51%),
      radial-gradient(1px 1px at 62% 12%, color-mix(in oklab, var(--gradient-ink-dark, #000) 35%, transparent) 50%, transparent 51%),
      radial-gradient(1px 1px at 8% 75%, color-mix(in oklab, var(--gradient-ink-dark, #000) 35%, transparent) 50%, transparent 51%);
    background-size: var(--gradient-noise-size) var(--gradient-noise-size);
    opacity: var(--gradient-noise-opacity);
    mix-blend-mode: var(--gradient-overlay-mode);

  .gradient-overlay-light { position: relative; isolation: isolate; }
  .gradient-overlay-light::before { content: ""; position: absolute; inset: 0; mix-blend-mode: screen; background: color-mix(in oklab, var(--gradient-ink-light, #fff) 10%, transparent); }
  .gradient-overlay-dark { position: relative; isolation: isolate; }
  .gradient-overlay-dark::before { content: ""; position: absolute; inset: 0; mix-blend-mode: multiply; background: color-mix(in oklab, var(--gradient-ink-dark, #000) 8%, transparent); }
  .gradient-overlay::before {
    /* optional weißes Overlay zur „Milchigkeit“ */
    content: ""; position: absolute; inset: 0; pointer-events: none; z-index: 0;
    background: color-mix(in oklab, var(--gradient-ink-light, #fff) calc(var(--gradient-overlay-alpha) * 100%), transparent);
    mix-blend-mode: var(--gradient-overlay-mode);

  /* Hover-Shift (dreht Winkel leicht) */
  .gradient-interactive {
    transition: transform .25s ease, filter .25s ease, background .25s ease;
    will-change: background-image, background;

  .gradient-interactive:hover {
    /* Näherung: wir rekonstruierten via var() additiv – Fallback: leichtes Brightness-Play */
    filter: brightness(1.04) saturate(1.02);

  /* Fokus-Ring passend zum Gradient */
  .gradient-focusable:focus-visible { outline: none; box-shadow: var(--gradient-focus-ring); }

  /* Borders mit Gradient (für sichtbare Kanten / Badges) */
  .gradient-border {
    border: 1px solid transparent;
    background:
      linear-gradient(var(--gradient-border-angle), var(--gradient-border-from), var(--gradient-border-to)) border-box,
      linear-gradient(transparent, transparent) padding-box; /* isoliert Inhalt */
    /* Tipp: kombiniere mit background-clip: padding-box; für inner content */

  /* Ringe über box-shadow */
  .gradient-ring {
    box-shadow:
      0 0 0 1px color-mix(in oklab, var(--gradient-border-from) 60%, var(--gradient-border-to)),
      0 0 0 4px color-mix(in oklab, var(--gradient-border-from) 25%, transparent);

  /* ===== Conic Progress Ring ===== */
  .gradient-conic-progress {
    --value: 66; /* 0..100 */
    --g-size: 48px;
    --g-thickness: 8px;
    --g-color: var(--gradient-border-from);
    width: var(--g-size); height: var(--g-size);
    border-radius: 50%;
    background:
      conic-gradient(var(--g-color) calc(var(--value) * 1%), color-mix(in oklab, var(--g-color) 20%, transparent) 0);
    -webkit-mask: radial-gradient(
      farthest-side,
      transparent calc(50% - var(--g-thickness)),
      color-mix(in oklab, var(--gradient-ink-dark, #000) 100%, transparent) calc(50% - var(--g-thickness) + 1px)
    );
            mask: radial-gradient(
      farthest-side,
      transparent calc(50% - var(--g-thickness)),
      color-mix(in oklab, var(--gradient-ink-dark, #000) 100%, transparent) calc(50% - var(--g-thickness) + 1px)
    );

  /* ===== Conic Progress Ring ===== */
  .gradient-conic-progress {
    --value: 66; /* 0..100 */
    --g-size: 48px;
    --g-thickness: 8px;
    --g-color: var(--gradient-border-from);
    width: var(--g-size); height: var(--g-size);
    border-radius: 50%;
    background:
      conic-gradient(var(--g-color) calc(var(--value) * 1%), color-mix(in oklab, var(--g-color) 20%, transparent) 0);
    -webkit-mask: radial-gradient(
      farthest-side,
      transparent calc(50% - var(--g-thickness)),
      color-mix(in oklab, var(--gradient-ink-dark, #000) 100%, transparent) calc(50% - var(--g-thickness) + 1px)
    );
            mask: radial-gradient(
      farthest-side,
      transparent calc(50% - var(--g-thickness)),
      color-mix(in oklab, var(--gradient-ink-dark, #000) 100%, transparent) calc(50% - var(--g-thickness) + 1px)
    );

  /* ============================================================
     Presets (Semantik) – schnell einsetzbar
     ============================================================ */

  .gradient-accent {
    --gradient-stop-1: var(--gradient-accent-from);
    --gradient-stop-2: var(--gradient-accent-mid) var(--gradient-stop-mid-pct, 50%);
    --gradient-stop-3: var(--gradient-accent-to);

  .gradient-primary {
    --gradient-stop-1: var(--gradient-primary-from);
    --gradient-stop-2: var(--gradient-primary-mid) var(--gradient-stop-mid-pct, 50%);
    --gradient-stop-3: var(--gradient-primary-to);

  .gradient-success {
    --gradient-stop-1: var(--gradient-success-from);
    --gradient-stop-2: var(--gradient-success-mid) var(--gradient-stop-mid-pct, 50%);
    --gradient-stop-3: var(--gradient-success-to);

  .gradient-warning {
    --gradient-stop-1: var(--gradient-warning-from);
    --gradient-stop-2: var(--gradient-warning-mid) var(--gradient-stop-mid-pct, 50%);
    --gradient-stop-3: var(--gradient-warning-to);

  .gradient-neutral {
    --gradient-stop-1: var(--gradient-neutral-from);
    --gradient-stop-2: var(--gradient-neutral-mid) var(--gradient-stop-mid-pct, 50%);
    --gradient-stop-3: var(--gradient-neutral-to);

  /* Stop density presets */
  .gradient-stops-compact { --gradient-stop-mid-pct: 35%; }
  .gradient-stops-even    { --gradient-stop-mid-pct: 50%; }
  .gradient-stops-wide    { --gradient-stop-mid-pct: 65%; }

  /* ============================================================
     Masks / Clipping (moderne, weiche Abschattungen)
     ============================================================ */
  .gradient-mask-top {
    -webkit-mask-image: linear-gradient(to bottom, var(--gradient-ink-dark, #000) 70%, transparent 100%);
    mask-image: linear-gradient(to bottom, var(--gradient-ink-dark, #000) 70%, transparent 100%);

  .gradient-mask-bottom {
    -webkit-mask-image: linear-gradient(to top, var(--gradient-ink-dark, #000) 70%, transparent 100%);
    mask-image: linear-gradient(to top, var(--gradient-ink-dark, #000) 70%, transparent 100%);

  .gradient-mask-fade {
    -webkit-mask-image: linear-gradient(to bottom, transparent, var(--gradient-ink-dark, #000) 20%, var(--gradient-ink-dark, #000) 80%, transparent);
    mask-image: linear-gradient(to bottom, transparent, var(--gradient-ink-dark, #000) 20%, var(--gradient-ink-dark, #000) 80%, transparent);

  .gradient-mask-radial {
    -webkit-mask-image: radial-gradient(circle at var(--gradient-position), var(--gradient-ink-dark, #000) 60%, transparent 100%);
    mask-image: radial-gradient(circle at var(--gradient-position), var(--gradient-ink-dark, #000) 60%, transparent 100%);

  .gradient-mask-conic {
    -webkit-mask-image: conic-gradient(from var(--gradient-conic-angle) at var(--gradient-position), var(--gradient-ink-dark, #000), transparent);
    mask-image: conic-gradient(from var(--gradient-conic-angle) at var(--gradient-position), var(--gradient-ink-dark, #000), transparent);

  /* ============================================================
     Dark/Light Tweaks
     ============================================================ */
  [data-theme="light"] .gradient-bg,
  [data-theme="light"] .gradient-bg-linear,
  [data-theme="light"] .gradient-bg-animated,
  [data-theme="light"] .gradient-bg-radial,
  [data-theme="light"] .gradient-bg-conic {
    filter: brightness(calc(100% + var(--gradient-light-boost)));

  [data-theme="dark"] .gradient-bg,
  [data-theme="dark"] .gradient-bg-linear,
  [data-theme="dark"] .gradient-bg-animated,
  [data-theme="dark"] .gradient-bg-radial,
  [data-theme="dark"] .gradient-bg-conic {
    filter: brightness(calc(100% + var(--gradient-dark-boost)));

  /* ============================================================
     A11y / Motion / Fallbacks
     ============================================================ */

  @media (prefers-reduced-motion: reduce) {
    .gradient-bg-animated { animation: none !important; background-position: 50% 50% !important; }

  /* Fallback, wenn color-mix/oklab nicht verfügbar:
     (Wir liefern weiterhin brauchbare Verläufe, nur ohne Space-Magie) */
  @supports not (background: color-mix(in oklab, white 10%, transparent)) {
    .gradient-ring {
      box-shadow:
        0 0 0 1px var(--gradient-border-from),
        0 0 0 4px color-mix(in oklab, var(--gradient-ink-dark, #000) 8%, transparent);

  /* Optionale zusätzliche Animation (falls gradientShift nicht global vorhanden ist) */
  @keyframes gradientShift {
    0%   { background-position: 0% 50% }
    50%  { background-position: 100% 50% }
    100% { background-position: 0% 50% }

/* Aliases */

  .gradient-shift { @apply gradient-bg-animated; }
  .gradient-rotate { background: conic-gradient(from var(--gradient-conic-angle) at var(--gradient-position), var(--gradient-stop-1), var(--gradient-stop-2), var(--gradient-stop-3)); animation: gradientRotate 6s linear infinite; }
  .gradient-pulse  { filter: brightness(1); animation: gradientPulse 2.4s ease-in-out infinite; }
  .gradient-hover:hover { filter: brightness(1.05) saturate(1.05); }
  .gradient-focus:focus-visible { outline: none; box-shadow: var(--gradient-focus-ring); }
  .gradient-active:active { filter: brightness(1.06) saturate(1.06); }

  /* Patterns */
  .gradient-stripes { background-image: repeating-linear-gradient(45deg, color-mix(in oklab, var(--gradient-stop-1) 35%, transparent) 0 12px, transparent 12px 24px); }
  .gradient-dots { background-image: radial-gradient(currentColor 1px, transparent 2px); background-size: 12px 12px; }
  .gradient-grid { background-image: linear-gradient(transparent, transparent calc(100% - 1px), currentColor calc(100% - 1px)), linear-gradient(90deg, transparent, transparent calc(100% - 1px), currentColor calc(100% - 1px)); background-size: 24px 24px; }

  /* Text effects */
  .gradient-text-3d { text-shadow: 0 1px 0 color-mix(in oklab, currentColor 35%, transparent), 0 2px 0 color-mix(in oklab, currentColor 25%, transparent), 0 3px 0 color-mix(in oklab, currentColor 15%, transparent), 0 4px 6px color-mix(in oklab, var(--gradient-ink-dark, #000) 15%, transparent); }
  .gradient-text-shadow { text-shadow: 0 2px 8px color-mix(in oklab, var(--gradient-stop-1) 35%, transparent); }

  /* Shapes (via clip-path) */
  .gradient-circle { clip-path: circle(50% at 50% 50%); }
  .gradient-heart { clip-path: path('M 50 15 C 35 -5, 0 0, 0 30 C 0 55, 25 75, 50 95 C 75 75, 100 55, 100 30 C 100 0, 65 -5, 50 15 Z'); }
  .gradient-star { clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%); }

  @keyframes gradientRotate { to { --gradient-conic-angle: 360deg; } }
  @keyframes gradientPulse { 0%,100% { filter: brightness(1) } 50% { filter: brightness(1.08) } }