/* Import animations package first */
@import "@casoon/tailwindcss-animations/index.css";

/* Import tokens first */
@import "./tokens.css";  /* ergänzt Scroll-Variablen */

@layer components {
  /* Grundzustand: unsichtbar bis in-view */
  .scroll {
    opacity: 0;
    backface-visibility: hidden;
    will-change: transform, opacity, filter;
    transform-origin: center;
  }

  /* JS setzt .scroll-in + .anim automatisch */
  .scroll-in,
  .scroll.is-inview {
    opacity: 1;
  }

  /* === Effekt-Aliase -> mappen auf DEINE Utilities ===
     So kannst du überall "scroll-*" verwenden,
     intern nutzen wir aber deine .fade-in/.slide-up/... Klassen. */

  .scroll-fade      { animation-name: anim-fade-in }
  .scroll-fade-up   { animation-name: anim-slide-up }
  .scroll-fade-down { animation-name: anim-slide-down }
  .scroll-fade-left { animation-name: anim-slide-left }
  .scroll-fade-right{ animation-name: anim-slide-right }

  .scroll-slide-up    { animation-name: anim-slide-up }
  .scroll-slide-down  { animation-name: anim-slide-down }
  .scroll-slide-left  { animation-name: anim-slide-left }
  .scroll-slide-right { animation-name: anim-slide-right }

  .scroll-zoom-in   { animation-name: anim-scale-in }
  .scroll-zoom-out  { animation-name: anim-scale-out }

  .scroll-rotate-in { animation-name: anim-rotate-in }
  .scroll-reveal-3d-up { animation-name: anim-reveal-3d-up; transform-style: preserve-3d; }
  .scroll-reveal-3d-right { animation-name: anim-reveal-3d-right; transform-style: preserve-3d; }

  /* Bonus-Alias passend zu deinem Glass/Blur-Rezept */
  .scroll-blur-in { animation-name: anim-blur-in }

  /* === Animations-Basics via deine --anim-* Tokens === */
  .scroll-in,
  .scroll.anim {
    animation-duration: var(--anim-duration, var(--anim-duration-sm));
    animation-timing-function: var(--anim-ease, var(--anim-ease-standard));
    animation-fill-mode: both;
    animation-delay: var(--anim-delay, 0ms);
    animation-iteration-count: var(--anim-iter, 1);
    animation-direction: var(--anim-direction, normal);
  }

  /* === Utilities (füttern nur deine --anim-* Variablen) === */
  .scroll-delay-0   { --anim-delay: 0ms }
  .scroll-delay-50  { --anim-delay: 50ms }
  .scroll-delay-100 { --anim-delay: 100ms }
  .scroll-delay-150 { --anim-delay: 150ms }
  .scroll-delay-200 { --anim-delay: 200ms }
  .scroll-delay-300 { --anim-delay: 300ms }
  .scroll-delay-500 { --anim-delay: 500ms }
  .scroll-fast      { --anim-duration: var(--anim-duration-xs) }
  .scroll-normal    { --anim-duration: var(--anim-duration-sm) }
  .scroll-slow      { --anim-duration: var(--anim-duration-lg) }
  .scroll-loop      { --anim-iter: infinite }

  /* Stagger: nutzt nur CSS-Variablen (JS kann optional erweitern) */
  .scroll-stagger > * {
    --scroll-stagger-base: var(--scroll-stagger-step, 80ms);
    --anim-delay: calc(var(--scroll-stagger-index, 0) * var(--scroll-stagger-base));
  }
  .scroll-stagger > *:nth-child(1) { --scroll-stagger-index: 0 }
  .scroll-stagger > *:nth-child(2) { --scroll-stagger-index: 1 }
  .scroll-stagger > *:nth-child(3) { --scroll-stagger-index: 2 }
  .scroll-stagger > *:nth-child(4) { --scroll-stagger-index: 3 }
  .scroll-stagger > *:nth-child(5) { --scroll-stagger-index: 4 }

  /* Parallax (Werte setzt JS in --sx/--sy/--ss) */
  .scroll-parallax {
    transform: translate3d(var(--sx,0), var(--sy,0), 0) scale(var(--ss,1));
  }

  /* Motion-Safety */
  @media (prefers-reduced-motion: reduce) {
    .scroll, .scroll-in, .anim {
      animation-duration: var(--anim-reduced-motion-duration, 1ms) !important;
      animation-iteration-count: 1 !important;
      animation-play-state: paused !important;
      opacity: var(--scroll-reduce-opacity, 1) !important;
      transform: none !important;
      filter: none !important;
      transition: none !important;
    }
  }
}
